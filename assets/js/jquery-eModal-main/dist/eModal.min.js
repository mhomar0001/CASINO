!function(e){if(e.eModal)throw new Error("$.eModal already exists!");e.extend(e,{eModal:function(){var t,a,o,n={},i={},r="<div>",l='<h5>Loading...</h5><div class=progress><div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 100%"></div></div>',s="",d="hide",m="click",p="submit",c="show.bs.modal",f="shown.bs.modal",u="hide.bs.modal",b="hidden.bs.modal",y="modal-body",h=".modal-dialog",g=".modal-backdrop",x=".modal-content",v="eRecyclebin",j="modal-rec",w="modal-tmp",C="fade",k="btn-danger",M="input[type=text], input[type=password], input[type=email], input[type=tel], input[type=date], input[type=time], input[type=datetime-local], input[type=url], input[type=number], input[type=search], input[type=color], textarea, select",H={OK:"Cancel"},T={sm:"sm",lg:"lg",xl:"xl"},S=["modal-dialog","modal-eModal","modal-dialog-scrollable"],O={left:"start",center:"center",right:"end"},z={top:"start",middle:"center",bottom:"end"},I={animation:C,async:!1,ajax:{dataType:!1,error:!1,loading:!1,loadingHtml:l,success:!1,url:!1,xhr:{}},binId:!1,bodyStyles:!1,buttons:null,confirm:{label:Object.keys(H)[0],style:[]},cssClass:!1,footer:!0,header:!0,headerClose:!0,headerCloseHtml:'<button type="button" class="x close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>',height:!1,id:!1,iframe:{attributes:{},loadingHtml:l,url:!1},message:!1,modalOptions:!1,overlayClose:!0,onHide:!1,position:["top","center"],prompt:{autocomplete:!1,autofocus:!1,checkValidity:!1,label:Object.keys(H)[0],pattern:!1,placeholder:!1,required:!0,style:[],type:"text",value:!1},size:s,subtitle:!1,title:"Attention",useBin:!1,width:!1,wrapSubtitle:"<small>",wrapTitle:"<h5>"},L={alert:function(t,a){var o={message:t.message||t};return B(o=e.extend({},"object"==typeof t?t:{},o),a)},ajax:function(o,n){var r={ajax:{loading:!o.ajax||null==o.ajax.loading||o.ajax.loading,url:o.ajax&&o.ajax.url||o.message||o,xhr:{dataType:o.ajax&&o.ajax.dataType||"html",xhrFields:{withCredentials:!1}}}};return r=e.extend(!0,{},"object"==typeof o?o:{},r),e.ajax(r.ajax.url,r.ajax.xhr).done((function(o){if((e("#eModal").data("bs.modal")||{})._isShown)return t.find(".modal-body").html(r.ajax&&"function"==typeof r.ajax.success?r.ajax.success(o):o),!(!a||!i.async)&&a.resolve(t);t.on(f,(function(e){return t.find(".modal-body").html(r.ajax&&"function"==typeof r.ajax.success?r.ajax.success(o):o),!(!a||!i.async)&&a.resolve(t)}))})).fail((function(o,n,l){if((e("#eModal").data("bs.modal")||{})._isShown){var s=r.ajax&&"function"==typeof r.ajax.error?r.ajax.error(o,n,r):'<div class="alert alert-danger mb-0"><strong>XHR Fail: </strong>URL [ '+r.ajax.url+"] load fail.</div>";return t.find(".modal-body").html(s),!(!a||!i.async)&&a.reject(o)}t.on(f,(function(e){var l=r.ajax&&"function"==typeof r.ajax.error?r.ajax.error(o,n,r):'<div class="alert alert-danger mb-0"><strong>XHR Fail: </strong>URL [ '+r.ajax.url+"] load fail.</div>";return t.find(".modal-body").html(l),!(!a||!i.async)&&a.reject(o)}))})),B(r,n)},confirm:function(n,i){var r={async:!0,footer:!0,message:n.message||n,buttons:[{close:!0,click:l,resolve:!0,text:n.confirm&&H[n.confirm.label]?n.confirm.label:I.confirm.label,style:n.confirm&&n.confirm.style&&n.confirm.style[0]},{close:!0,text:n.confirm&&H[n.confirm.label]?H[n.confirm.label]:H[I.confirm.label],style:n.confirm&&n.confirm.style&&n.confirm.style[1]||k}]};return r=e.extend({},"object"==typeof n?n:{},r),o=l,B(r,i);function l(n){return o=null,e(n.currentTarget).data("resolve")?a.resolve(t):a.reject(t)}},prompt:function(n,i){var r={async:!0,footer:!1,message:n.message||n},l=R({footer:!0,buttons:[{close:!1,type:p,text:n.prompt&&H[n.prompt.label]?n.prompt.label:I.prompt.label,style:n.prompt&&n.prompt.style&&n.prompt.style[0]},{close:!0,type:"reset",text:n.prompt&&H[n.prompt.label]?H[n.prompt.label]:H[I.prompt.label],style:n.prompt&&n.prompt.style&&n.prompt.style[1]||k}]});return(r=e.extend({},"object"==typeof n?n:{},r)).message=e('<form class="m-0 p-0" role="form"><div class="modal-body"><label for="prompt-input" class="control-label">'+(r.message||s)+'</label><input class="prompt-input form-control" type="'+(r.prompt&&r.prompt.type||"text")+'" value="'+(r.prompt&&r.prompt.value||s)+'"'+(r.prompt&&r.prompt.required?" required":s)+(r.prompt&&r.prompt.pattern?' pattern="'+r.prompt.pattern+'"':s)+' autocomplete="'+(r.prompt&&r.prompt.autocomplete?"on":"off")+'"'+(r.prompt&&r.prompt.placeholder?' placeholder="'+r.prompt.placeholder+'"':s)+'"></div></form>').append(l).on(p,(function(e){e.preventDefault();var o=t.find(".prompt-input").val();return e.type===p&&a.resolve(o),t.modal(d)})),o=function(){return o=null,!!a.promise&&a.reject(t)},B(r,i)},iframe:function(o,n){var r={footer:!1,iframe:{url:o.iframe&&o.iframe.url||o.message||o}};(r=e.extend(!0,{},"object"==typeof o?o:{},r)).message=e('<div class="modal-body p-0"><div class="eLoading d-flex flex-column justify-content-center position-absolute w-100 h-100 p-3 text-center bg-white" style="z-index: 100"></div><iframe class="d-block w-100 h-100" frameborder="0" style="z-index: 10"></iframe></div>');var l=r.message.find("iframe").attr("src",r.iframe.url);return r.iframe&&"object"==typeof r.iframe.attributes&&e.each(r.iframe.attributes,(function(t,a){"width"!=t&&"height"!=t&&l.attr(t,e("<div/>").text(a).html())})),r.message.find(".eLoading").append(o.iframe&&o.iframe.loadingHtml||I.iframe.loadingHtml),V("3.0.0")?r.message.find("iframe").on("load",s):r.message.find("iframe").load(s),B(r,n);function s(){e(this).parents(".modal-body").find(".eLoading").fadeOut(400,(function(){e(this).remove()})),a.promise&&i.async&&a.resolve(t)}},embed:function(o,n){var r={iframe:{url:o.iframe&&o.iframe.url||o.message||o}};(r=e.extend(!0,{},"object"==typeof o?o:{},r)).message=e('<div class="modal-body p-0"><div class="eLoading d-flex flex-column justify-content-center position-absolute w-100 h-100 p-3 text-center bg-white" style="z-index: 100"></div><div class="embed-responsive embed-responsive-16by9" style="z-index: 10"><iframe class="embed-responsive-item d-block w-100" frameborder="0"></iframe></div></div>');var l=r.message.find("iframe").attr("src",r.iframe.url);return r.iframe&&"object"==typeof r.iframe.attributes&&e.each(r.iframe.attributes,(function(t,a){"width"!=t&&"height"!=t&&l.attr(t,e("<div/>").text(a).html())})),r.message.find(".eLoading").append(o.iframe&&o.iframe.loadingHtml||I.iframe.loadingHtml),V("3.0.0")?r.message.find("iframe").on("load",s):r.message.find("iframe").load(s),B(r,n);function s(){e(this).parents(".modal-body").find(".eLoading").fadeOut(400,(function(){e(this).remove()})),a.promise&&i.async&&a.resolve(t)}}};return L.close=D,L.label=function(e,t){return H[e]=t,L},L.emptyBin=function(){return e("#"+v+" > *").remove(),L},L.modal=function(){if(t)return t},L.defer=function(){if(a.promise)return a},L.size=function(e){return T[e]=e,L},L.version="2.0.0",L;function B(l,s){var d,p;return d="object"==typeof l?l:{},i={},e.extend(!0,i,I,d),console.log(i),function(t){n={},"object"==typeof t&&e.extend(n,t)}(i.modalOptions),i.overlayClose||(n.backdrop="static"),"string"==typeof l&&(i.message=l),s&&""!=s&&(i.title=s),function(a){if(!a)throw new Error("First argument cannot be blank!");t&&(t.off(c).off(f).off(u).off(b).off(m,".x").removeClass(C).find(h).removeAttr("id").removeClass((function(e,t){return t.split(" ").map((function(e){if(-1==S.indexOf(e))return e})).join(" ")})).find(x).children().remove(),t.find("#eStyle").empty(),e(g).length&&e(g).remove(),t.modal("dispose")),function(a){(t=e("#eModal").length?e("#eModal"):e('<div id="eModal" class="modal eModal" tabindex="-1"><div class="'+S.join(" ")+'"><div class="modal-content"></div></div><style id="eStyle"></style></div>').appendTo("body")).addClass(a.animation).find(h).prop("id",(function(){return a.id||void 0})).addClass(a.cssClass||null).addClass(a.size&&T[a.size]?"modal-"+a.size:null),t.find("#eStyle").html(function(e){if(e.width)var t=E(e.width);if(e.height)var a=E(e.height,"height");return".modal-eModal {display: flex; align-items: "+(z[e.position[0]]?z[e.position[0]]:I.position[0])+"; justify-content: "+(O[e.position[1]]?O[e.position[1]]:I.position[1])+"; width: calc(100% - 1rem)!important; max-width: none; height: calc(100% - 1rem)!important;}.modal-eModal.modal-dialog-scrollable .modal-content {overflow: visible !important;}@media (min-width: 576px) {.modal-eModal {width: calc(100% - 3.5rem)!important; height: calc(100% - 3.5rem)!important;}}.modal-eModal .modal-content {max-width: 500px;}.modal-eModal.modal-sm .modal-content {max-width: 300px;}.modal-eModal.modal-lg .modal-content {max-width: 800px;}.modal-eModal.modal-xl .modal-content {max-width: 1140px;}"+(t?".modal-eModal .modal-content {max-width: "+t+" !important; width: 100%;}":"")+(a?".modal-eModal .modal-content {max-height: "+a+" !important; height: 100%;}":"")}(a)),t.on(b,(function(a){!function(a){if(t){if(e("#"+v).length||e(r).appendTo("body").prop("id",v).hide(),a instanceof e.Event)var o=i;else o=a;var n=t.find(".modal-rec").removeClass(j).appendTo("#"+v);o.binId&&n.prop("id",o.binId+"-bin"),o.useBin&&o.binId||n.remove()}}(a)})).on(m,".x",(function(e){A(e)})),a.prompt&&a.prompt.autofocus&&t.on(f,(function(){e(this).find(M).first().focus()}))}(a),"function"==typeof o&&t.on(u,o),"function"==typeof a.onHide&&t.on(u,a.onHide)}(i),t&&((a=e.Deferred()).promise=a.promise(),a.promise.element=t.find(h)),p={header:F(i),footer:R(i),body:q(i)},t&&(t.find(x).append(p.header,p.body,p.footer),t.modal(n)),!l.header&&l.overlayClose&&t.find(x).append('<button class="x btn btn-sm btn-dark position-absolute" style="top: -10px; left: -10px; width: 20px; height: 20px; padding: 0; line-height: 1;" data-dismiss="modal" type="button">&times;</button>'),a.promise&&!i.async&&t.on(f,a.reject),a.promise}function E(e,t){var a=Number(window.getComputedStyle(document.documentElement).getPropertyValue("font-size").match(/\d+/)[0]);if(window.innerWidth>=576)var o=3.5;else o=1;if(t&&"height"==t)var n=window.innerHeight-o*a;else n=window.innerWidth-o*a;return-1!=e.indexOf("px")?((e=+e.replace("px",""))>n&&(e=n),e+"px"):-1!=e.indexOf("%")?(e=(e=+e.replace("%",""))>100?n:parseInt(n*e/100))+"px":isNaN(+e)?void 0:((e=+e)>n?e=n:0==e&&(e=300),e+"px")}function F(t){if(t.header){var a=e(r).addClass("modal-header").prop("id","eHeader");if(t.title){var o=e(t.wrapTitle).appendTo(a).addClass("modal-title").html(t.title);t.subtitle&&e(t.wrapSubtitle).appendTo(o).html(" "+t.subtitle)}return t.headerClose&&e(t.headerCloseHtml).appendTo(a),a}return s}function R(a){if(a.footer){if(!1===a.buttons)return s;var o=e(r).addClass("modal-footer").prop("id","eFooter");if(Array.isArray(a.buttons))for(var n=0;n<a.buttons.length;n++){var i=a.buttons[n],l=e("<button>").attr("type","button").addClass("btn "+(i.style||"btn-primary"));for(var d in i.style&&delete i.style,i)if(i.hasOwnProperty(d))switch(d){case"close":i[d]&&l.attr("data-dismiss","modal").addClass("x");break;case m:if("function"==typeof i.click){var p=i.click.bind(t.find(x));l.on("click",p)}break;case"resolve":l.data(d,i[d]);break;case"text":l.html(i[d]);break;default:l.attr(d,e("<div/>").text(i[d]).html())}o.append(l)}else"string"==typeof a.buttons?o.html(a.buttons):o.append('<button class="x btn btn-primary" data-dismiss="modal" type="button">Close</button>');return o}return s}function q(t){if(t.message&&t.message instanceof jQuery)var a=t.message.clone(!0);else a=t.message;try{if(t.useBin&&t.binId&&e("#"+v).find("#"+t.binId+"-bin").length){var o=e("#"+v).find("#"+t.binId+"-bin"),n=o.clone(!0);o.remove()}else n=e(t.ajax.loading?t.ajax.loadingHtml:a);if(!n.length)throw new Error("This is a string!");if(n.hasClass(y)||n.find(".modal-body").length)var i=n.addClass(t.useBin?j:w);else i=e(r).addClass(y).addClass(t.useBin?j:w).attr("style","word-wrap: break-word;").append(n)}catch(o){console.log(o),i=e(r).addClass(y).attr("style","word-wrap: break-word;").html(t.ajax.loading?t.ajax.loadingHtml:a)}return i.prop("id",t.binId||"eBody"),t.bodyStyles&&t.bodyStyles!==i.css&&i.css(t.bodyStyles),i}function A(a){a.preventDefault();var o=e(a.currentTarget);if(o.prop("type")!==p)return t.modal(d);try{obj.prompt&&obj.prompt.checkValidity&&o.closest("form")[0].checkValidity()&&D()}catch(e){D()}}function V(t){var a=e.fn.jquery.split("."),o=t.split("."),n=a[0],i=a[1],r=a[2],l=o[0],s=o[1],d=o[2];return!(l>n||l===n&&s>i||l===n&&s===i&&d>r)}function D(){t&&t.off(u).modal(d)}}()})}(jQuery);